*** 进程、线程、协程的关系和区别 ***  
- 进程拥有自己独立的堆和栈，不共享堆，不共享栈，进程有操作系统调度   
- 线程拥有自己独立的栈和堆，共享堆，不共享栈，标准线程有操作系统调度   
- 协程和线程一样共享堆，不共享栈，协程有开发程序调度    

协程和线程的区别是协程避免了无意义的调度，但是是有程序自己调度  
执行线程只需要极少的栈内存(大概4-5kb),默认情况下线程栈的大小是1MB. goroutine就是一段代码，一个函数入口以及在堆上分配的堆栈，非常廉价并不被操作系统调度。  
goroutine的一个主要特性就是他们的消耗。创建它们的初始内存成本很低（线程需要1-8Mb的内存)以及根据需要动态增长和缩减占用的资源。这使得 goroutine 会从 4096 字节的初始栈内存占用开始按需增长或缩减内存占用，而无需担心资源的耗尽。 


### 协程数量控制
goroutine控制数量有 两种方法：
1. channel控制，申请一定数量的channel，channel装满后就会阻塞
2. 利用sync.WaitGroup,配合相关函数Add,Done控制


### channel使用
****无缓冲****
> 默认情况下channel接收数据和发送数据都是阻塞的，除非另外一端已经准备好(channel读取数据将会被阻塞除非有数据可以接收，发送会被阻塞除非数据被读出)

****缓冲channel****
1. 不使用goroutine
buffer size >= 写的次数(正常)
buffer size < 写的次数 (出错，已经被阻塞了)
2. 使用goroutine
buffer size > = < 写的次数都正常（因为使用goroutine,会阻塞相应的goroutine，而不影响主的goroutine)


### select使用
select监听IO操作，当IO操作发生时，触发相应的操作，在执行select语句时，运行时系统自上而下的判断每个case中的发送或者接收操作是否可以被立即执行

- 每个case语句里必须是一个IO操作  
- 所有channel表达式都会被求值、所有被发送的表达式都会被求值  
- 如果任意某个case可以进行，它就执行(其他被忽略)。  
- 如果有多个case都可以运行，Select会随机公平地选出一个执行(其他不会执行)。  
- 如果有default子句，case不满足条件时执行该语句。  
- 如果没有default字句，select将阻塞，直到某个case可以运行；Go不会重新对channel或值进行求值。  

select语句中只能是IO操作